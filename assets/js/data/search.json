[
  
  {
    "title": "docker常用容器",
    "url": "/posts/docker%E5%B8%B8%E7%94%A8%E5%AE%B9%E5%99%A8/",
    "categories": "docker",
    "tags": "jellyfin, docker",
    "date": "2025-11-03 00:00:00 +0800",
    "content": "Docker Compose 常用容器 自动检测并更新运行中的容器，适合保持镜像最新。 1. watchtower services:   watchtower:     container_name: wt     image: containrrr/watchtower:latest     volumes:       - /var/run/docker.sock:/var/run/docker.sock     ports:       - 8000:8080     environment:       - TZ=Asia/Shanghai       - WATCHTOWER_CLEANUP=true     restart: always     command: --interval 36000  2. Jellyfin  services:   jellyfin:     image: lscr.io/linuxserver/jellyfin:latest     container_name: jf     environment:       - PUID=0       - PGID=0       - TZ=Asia/Shanghai      # - JELLYFIN_PublishedServerUrl=192.168.0.5 #optional     volumes:       - /data/jf:/config       - /mnt/jf:/data/jf #      - /media/link:/media       - /usr/share/fonts/opentype/noto/:/usr/share/fonts/truetype/dejavu     network_mode: 'host'     #ports:      # - 8096:8096      # - 8920:8920 #optional      # - 7359:7359/udp #optional      # - 1900:1900/udp #optional     restart: unless-stopped"
  },
  
  {
    "title": "服务器限制日志大小",
    "url": "/posts/%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%99%90%E5%88%B6%E6%97%A5%E5%BF%97%E5%A4%A7%E5%B0%8F/",
    "categories": "it",
    "tags": "linux, nginx",
    "date": "2025-11-02 00:00:00 +0800",
    "content": "Nginx限制日志大小  本文记录常见的日志管理方法，包含：清空 Nginx 日志、配置 logrotate、配置 Nginx 日志格式，以及限制 systemd-journald 占用的磁盘空间并手动清理旧日志。  清空日志（不中断 Nginx）  直接清空访问日志同时不重启 Nginx：  truncate -s 0 /var/log/nginx/access.log   配置 logrotate  编辑 logrotate 配置文件：  nano /etc/logrotate.d/nginx   示例配置（放在 /etc/logrotate.d/nginx）：  /var/log/nginx/*.log {     daily     missingok     rotate 14     compress     delaycompress     notifempty     maxsize 100M     create 0640 www-data adm     sharedscripts     postrotate         # 使用实际 PID 文件位置         [ -f /run/nginx.pid ] &amp;&amp; kill -USR1 `cat /run/nginx.pid`     endscript }   测试 logrotate 配置是否正确（调试模式）：  logrotate -d /etc/logrotate.d/nginx   强制执行一次轮转以确认生效：  sudo logrotate -f /etc/logrotate.d/nginx   查看日志目录，确认已轮转并压缩：  ls -lh /var/log/nginx/   配置 Nginx 日志格式  编辑 Nginx 主配置（例如 /etc/nginx/nginx.conf），设置错误日志和访问日志格式：  error_log /var/log/nginx/error.log warn;  log_format minimal '$remote_addr $request $status'; access_log /var/log/nginx/access.log minimal;   修改后请测试并重载 Nginx：  sudo nginx -t &amp;&amp; sudo systemctl reload nginx   限制 systemd-journald 占用空间  编辑 journald 配置文件：  nano /etc/systemd/journald.conf   在文件中设置最大使用空间，例如：  [Journal] SystemMaxUse=512M SystemKeepFree=1G # ...   保存后重启 systemd-journald 服务使配置生效：  sudo systemctl restart systemd-journald.service   检查当前磁盘使用情况：  journalctl --disk-usage   你也可以查看 journald 服务日志来确认是否遵守了新的限制：  journalctl -u systemd-journald --since today | grep \"System Journal\"   手动清除旧日志（立即生效）  按大小清理（保留最近占用不超过指定大小的日志）：  sudo journalctl --vacuum-size=500M   按时间清理（清除早于指定时间的日志）：  sudo journalctl --vacuum-time=7days"
  },
  
  {
    "title": "vps初始化",
    "url": "/posts/vps%E5%88%9D%E5%A7%8B%E5%8C%96/",
    "categories": "it",
    "tags": "linux",
    "date": "2020-06-26 00:00:00 +0800",
    "content": "basic apt update &amp;&amp; apt upgrade -y rm -rf /etc/localtime &amp;&amp; ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime apt install -y htop unzip screen wget curl  vim nano net-tools  vnstat python  vnstat apt install -y vnstat nano /etc/vnstat.conf vnstat -u -i eth0 chown vnstat:vnstat /var/lib/vnstat/ systemctl restart vnstat  swap.sh wget https://www.moerats.com/usr/shell/swap.sh &amp;&amp; bash swap.sh  tz mkdir app &amp;&amp; cd app &amp;&amp; wget --no-check-certificate -qO client-linux.py 'https://raw.githubusercontent.com/cppla/ServerStatus/master/clients/client-linux.py'  nano /lib/systemd/system/tz.service  [Unit] Description=tz After=multi-user.target [Service] Type=idle ExecStart=/usr/bin/python /root/app/client-linux.py SERVER=tz.huxiao.co USER= PASSWORD= [Install] WantedBy=multi-user.target  systemctl start tz.service &amp;&amp; systemctl enable tz.service  ssh sed -i 's/^#\\?PermitRootLogin.*/PermitRootLogin yes/g' /etc/ssh/sshd_config; sed -i 's/^#\\?PasswordAuthentication.*/PasswordAuthentication yes/g' /etc/ssh/sshd_config; sed -i 's/#Port 22/Port 29190/' /etc/ssh/sshd_config;  service ssh restart  besttrace mkdir bt &amp;&amp; cd bt &amp;&amp; wget https://cdn.ipip.net/17mon/besttrace4linux.zip  &amp;&amp;unzip besttrace4linux.zip &amp;&amp; chmod +x besttrace ./besttrace -q 1 cm.daos.win   bbr 不卸载内核 wget -N --no-check-certificate \"https://github.000060000.xyz/tcpx.sh\" &amp;&amp; chmod +x tcpx.sh &amp;&amp; ./tcpx.sh 或 wget -N \"https://github.000060000.xyz/tcpx.sh\" &amp;&amp; chmod +x tcpx.sh &amp;&amp; ./tcpx.sh 卸载内核 wget -N --no-check-certificate \"https://github.000060000.xyz/tcp.sh\" &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh 或 wget -N \"https://github.000060000.xyz/tcp.sh\" &amp;&amp; chmod +x tcp.sh &amp;&amp; ./tcp.sh  vnstat apt install -y vnstat nano /etc/vnstat.conf vnstat -u -i eth0 chown vnstat:vnstat /var/lib/vnstat/ systemctl restart vnstat  swap.sh wget https://www.moerats.com/usr/shell/swap.sh &amp;&amp; bash swap.sh"
  },
  
  {
    "title": "vim注释与反注释",
    "url": "/posts/vim%E6%B3%A8%E9%87%8A%E4%B8%8E%E5%8F%8D%E6%B3%A8%E9%87%8A/",
    "categories": "it",
    "tags": "linux",
    "date": "2018-04-28 00:00:00 +0800",
    "content": "注释多行 方法1    Ctrl+v   Shift+i “#”   ESC key   方法2    :set number   :1,3s/^/#   :1,3s/^#/ $uncomment   反注释多行    Ctrl+v   d or x"
  },
  
  {
    "title": "CentOS7的一些配置",
    "url": "/posts/centos7%E9%85%8D%E7%BD%AE/",
    "categories": "it",
    "tags": "linux",
    "date": "2018-04-10 00:00:00 +0800",
    "content": "firewalld sestatus vi /etc/sysconfig/selinux  firewall-cmd --zone=public --add-port=/tcp --permanent firewall-cmd --zone=public --add-service=https --permanent firewall-cmd --reload  firewall-cmd --list-all firewall-cmd --state  systemctl disable firewalld systemctl stop firewalld systemctl status firewalld  卸载内核 rpm -qa kernel yum install -y yum-utils package-cleanup --oldkernels --count=1 rpm -e vi /etc/yum.conf installonly_limit=2  安装bbr rpm --import https://www.elrepo.org/RPM-GPG-KEY-elrepo.org rpm -Uvh http://www.elrepo.org/elrepo-release-7.0-3.el7.elrepo.noarch.rpm yum --disablerepo=\"*\" --enablerepo=\"elrepo-kernel\" list available yum --enablerepo=elrepo-kernel install kernel-ml -y rpm -qa | grep kernel #sed -i 's,GRUB_DEFAULT=saved,GRUB_DEFAULT=0,g' /etc/grub2.cfg #grub2-mkconfig -o /boot/grub2/grub.cfg  egrep ^menuentry /etc/grub2.cfg | cut -f 2 -d \\' grub2-set-default 0  echo 'net.core.default_qdisc=fq' | sudo tee -a /etc/sysctl.conf echo 'net.ipv4.tcp_congestion_control=bbr' | sudo tee -a /etc/sysctl.conf sysctl -p  sysctl -n net.ipv4.tcp_congestion_control"
  },
  
  {
    "title": "Debian的一些配置",
    "url": "/posts/debian%E9%85%8D%E7%BD%AE/",
    "categories": "it",
    "tags": "linux",
    "date": "2018-02-15 00:00:00 +0800",
    "content": "basic #time rm -rf /etc/localtime  ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime #vimrc&amp;nanorc cp /usr/share/vim/vim74/vimrc_example.vim .vimrc wget https://raw.githubusercontent.com/scopatz/nanorc/master/install.sh -O- | sh  enable bbr echo \"tcp_bbr\" &gt;&gt; /etc/modules-load.d/modules.conf echo \"net.core.default_qdisc=fq\" &gt;&gt; /etc/sysctl.conf echo \"net.ipv4.tcp_congestion_control=bbr\" &gt;&gt; /etc/sysctl.conf sysctl -p sysctl net.ipv4.tcp_available_congestion_control sysctl net.ipv4.tcp_congestion_control  add swap fallocate -l 1G /swapfile chmod 600 /swapfile mkswap /swapfile swapon /swapfile swapon -s echo \"/swapfile none swap sw 0 0\" &gt;&gt; /etc/fstab nano /etc/fstab /swapfile none swap sw 0 0"
  },
  
  {
    "title": "快速搭建wordpress",
    "url": "/posts/%E6%90%AD%E5%BB%BAwordpress/",
    "categories": "it",
    "tags": "wordpress",
    "date": "2018-01-21 00:00:00 +0800",
    "content": "install lnmp screen -S lnmp wget http://soft.vpser.net/lnmp/lnmp1.6.tar.gz -cO lnmp1.6.tar.gz &amp;&amp; tar zxf lnmp1.6.tar.gz &amp;&amp; cd lnmp1.6 &amp;&amp; ./install.sh lnmp ln -s /usr/local/nginx/conf/vhost/ Or screen -S oneinstack wget http://mirrors.linuxeye.com/oneinstack-full.tar.gz &amp;&amp; tar xzf oneinstack-full.tar.gz &amp;&amp; cd oneinstack &amp;&amp; ./install.sh   download wordpress cd /home/wwwroot/ wget http://wordpress.org/latest.tar.gz tar -xzvf latest.tar.gz chown -R www:www wordpress  mysql mysql -u root -p CREATE DATABASE wordpress;  GRANT ALL PRIVILEGES ON wordpress.* TO \"username\"@\"localhost\"          -&gt; IDENTIFIED BY \"password\"; FLUSH PRIVILEGES; exit"
  },
  
  {
    "title": "VPS Bench脚本",
    "url": "/posts/vps%E8%84%9A%E6%9C%AC/",
    "categories": "it",
    "tags": "linux, vps",
    "date": "2017-10-13 00:00:00 +0800",
    "content": "wget -qO- bench.sh | bash  bash &lt;(curl -Lso- https://git.io/superspeed)  wget -qO- git.io/superbench.sh | bash  wget -qO- sb.oldking.net | bash  bash &lt;(curl -sSL \"https://www.zeroteam.top/files/mediatest.sh\")  (wget -qO- wget.racing/nench.sh | bash) 2&gt;&amp;1 | tee nench.log  curl -fsL https://ilemonra.in/LemonBenchIntl | bash -s fast   curl -s https://raw.githubusercontent.com/masonr/yet-another-bench-script/master/yabs.sh | bash  curl -LsO bench.monster/speedtest.sh; bash speedtest.sh -Asia  docker run -d --restart=always --name=st -p 8020:80 ilemonrain/html5-speedtest:latest  wget --no-check-certificate https://github.com/teddysun/across/raw/master/unixbench.sh &amp;&amp; chmod +x unixbench.sh &amp;&amp; ./unixbench.sh  wget -q https://github.com/Aniverse/A/raw/i/a &amp;&amp; bash a"
  }
  
]

